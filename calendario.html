<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Conteo de Boletos</title>
</head>
<body>
  <h2>Selecciona una fecha:</h2>
  <input type="date" id="fechaInput">
  <button onclick="consultar()">Consultar boletos</button>

  <pre id="resultado"></pre>

  <script>
    const URL_SCRIPT = "https://script.google.com/macros/s/AKfycbw7lTBqLq5kld-JeuYtDTpxI7YogzBtzM52FFvRM65-mH7F3xdnpYad76IyHNLtbCh6-Q/exec"; // Pon aquí tu URL

    function consultar() {
      const input = document.getElementById("fechaInput").value;
      if (!input) return alert("Selecciona una fecha");
      const fecha = formatearFechaParaScript(input); // '2 Julio 2025'

      fetch(`${URL_SCRIPT}?fecha=${encodeURIComponent(fecha)}`)
        .then(res => res.json())
        .then(data => {
          if (data.error) return document.getElementById("resultado").textContent = "❌ " + data.error;

          let texto = "";
          for (const hora of Object.keys(data).sort()) {
            const { ex, na } = data[hora];
            texto += `${hora} → ${ex} Extranjeros, ${na} Nacionales\n`;
          }
          document.getElementById("resultado").textContent = texto;
        });
    }

    function formatearFechaParaScript(isoDate) {
      const fecha = new Date(isoDate);
      const dia = fecha.getDate();
      const mesNombre = fecha.toLocaleString("es-MX", { month: "long" });
      const anio = fecha.getFullYear();
      return `${dia} ${mesNombre.charAt(0).toUpperCase() + mesNombre.slice(1)} ${anio}`;
    }
  </script>
</body>
</html>
